# httpd.conf personalizado
# Definir la variable del directorio de logs estándar
Define APACHE_LOG_DIR /usr/local/apache2/logs

# Carga la configuración por defecto de la imagen
Include /usr/local/apache2/conf/httpd.conf

# --- Explicitly load mod_status and configure server-status ---
LoadModule status_module modules/mod_status.so
<IfModule mod_status.c>
    <Location "/server-status">
        SetHandler server-status
        # Allow access from localhost (health check), exporter container, and host IP
        Require local host apache-exporter ip 192.168.1.143
    </Location>
    ExtendedStatus On
</IfModule>
# --- End explicit loading ---

# Incluir configuraciones de sitios habilitados (para VirtualHosts)
IncludeOptional sites-enabled/*.conf

# We comment out the general includes for mods/conf enabled as we handle status explicitly
# IncludeOptional conf-enabled/*.conf
# IncludeOptional mods-enabled/*.load
# IncludeOptional mods-enabled/*.conf

